{"version":3,"sources":["../../src/utils/element.ts"],"sourcesContent":["const InlineLayoutTagNames = new Set([\n  'A',\n  'ABBR',\n  'ACRONYM',\n  'AUDIO',\n  'B',\n  'BDI',\n  'BDO',\n  'BIG',\n  'BR',\n  'BUTTON',\n  'CANVAS',\n  'CITE',\n  'CODE',\n  'DATA',\n  'DATALIST',\n  'DEL',\n  'DFN',\n  'EM',\n  'EMBED',\n  'I',\n  'IFRAME',\n  'IMG',\n  'INS',\n  'KBD',\n  'LABEL',\n  'MAP',\n  'MARK',\n  'METER',\n  'NOSCRIPT',\n  'OBJECT',\n  'OUTPUT',\n  'PICTURE',\n  'PROGRESS',\n  'Q',\n  'RUBY',\n  'S',\n  'SAMP',\n  'SELECT',\n  'SLOT',\n  'SMALL',\n  'STRONG',\n  'SUB',\n  'SUP',\n  'SVG',\n  'TEMPLATE',\n  'TEXTAREA',\n  'TIME',\n  'U',\n  'TT',\n  'VAR',\n  'VIDEO',\n  'WBR',\n  'INPUT',\n  'SPAN',\n])\n\nexport const calcElementOuterWidth = (\n  innerWidth: number,\n  style: CSSStyleDeclaration\n) => {\n  return (\n    innerWidth +\n    parseFloat(style.marginLeft) +\n    parseFloat(style.marginRight) +\n    parseFloat(style.paddingLeft) +\n    parseFloat(style.paddingRight) +\n    parseFloat(style.borderLeftWidth) +\n    parseFloat(style.borderRightWidth)\n  )\n}\n\nexport const calcElementLayout = (element?: Element) => {\n  if (!element) return 'vertical'\n  const parent = element.parentElement\n  if (!parent) return 'vertical'\n  const tagName = element.tagName\n  const parentTagName = parent.tagName\n  const style = getComputedStyle(element)\n  const parentStyle = getComputedStyle(parent)\n\n  const isNotFullWidth = () => {\n    const innerWidth = element.getBoundingClientRect().width\n    const outerWidth = calcElementOuterWidth(innerWidth, style)\n    const parentInnerWidth = parent.getBoundingClientRect().width\n    return outerWidth.toFixed(0) < parentInnerWidth.toFixed(0)\n  }\n  if (tagName === 'TH' || tagName === 'TD') {\n    if (parentTagName === 'TR') return 'horizontal'\n  }\n  if (parentStyle.display === 'flex' && parentStyle.flexDirection === 'row')\n    return 'horizontal'\n  if (parentStyle.display === 'grid') {\n    if (isNotFullWidth()) {\n      return 'horizontal'\n    }\n  }\n  if (InlineLayoutTagNames.has(tagName)) {\n    if (style.display === 'block') {\n      if (style.float === 'left' || style.float === 'right') {\n        if (isNotFullWidth()) {\n          return 'horizontal'\n        }\n      }\n      return 'vertical'\n    }\n    return 'horizontal'\n  }\n}\n\n// export const calcElementTranslate = (element: HTMLElement) => {\n//   const transform = element?.style?.transform\n//   if (transform) {\n//     const [x, y] = transform\n//       .match(\n//         /translate(?:3d)?\\(\\s*([-\\d.]+)[a-z]+?[\\s,]+([-\\d.]+)[a-z]+?(?:[\\s,]+([-\\d.]+))?[a-z]+?\\s*\\)/\n//       )\n//       ?.slice(1, 3) ?? [0, 0]\n\n//     return new Point(Number(x), Number(y))\n//   } else {\n//     return new Point(Number(element.offsetLeft), Number(element.offsetTop))\n//   }\n// }\n\nexport const calcElementRotate = (element: HTMLElement) => {\n  const transform = element?.style?.transform\n  if (transform) {\n    return Number(transform.match(/rotate\\(\\s*([-\\d.]+)/)?.[1] ?? 0)\n  } else {\n    return 0\n  }\n}\n\nexport const calcElementScale = (element: HTMLElement) => {\n  const transform = element?.style?.transform\n  if (transform) {\n    return Number(transform.match(/scale\\(\\s*([-\\d.]+)/)?.[1] ?? 0)\n  } else {\n    return 0\n  }\n}\n"],"names":["InlineLayoutTagNames","Set","calcElementOuterWidth","innerWidth","style","parseFloat","marginLeft","marginRight","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","calcElementLayout","element","parent","parentElement","tagName","parentTagName","getComputedStyle","parentStyle","isNotFullWidth","getBoundingClientRect","width","outerWidth","parentInnerWidth","toFixed","display","flexDirection","has","float","calcElementRotate","transform","Number","match","calcElementScale"],"mappings":"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"}