{"version":3,"sources":["../../src/controllers/ActiveController.ts"],"sourcesContent":["import { IDesignerEngine, NodeType, Unsubscribe } from \"../interfaces\";\r\nimport { IPlugin } from \"../interfaces/plugin\";\r\nimport { MouseOutEvent } from \"../shell/events/mouse/MouseOutEvent\";\r\nimport { MouseOverEvent } from \"../shell/events/mouse/MouseOverEvent\";\r\n\r\nexport class ActiveControllerImpl implements IPlugin {\r\n  name: string = \"default.active-controller\";\r\n  private unover: Unsubscribe\r\n  private unout: Unsubscribe\r\n\r\n  constructor(protected engine: IDesignerEngine) {\r\n    this.unover = engine.getShell().subscribeTo(MouseOverEvent, this.handleOverNode)\r\n    this.unout = engine.getShell().subscribeTo(MouseOutEvent, this.handleOutNode)\r\n  }\r\n\r\n  handleOverNode = (e: MouseOverEvent): void => {\r\n    const { rxId, nodeType } = e.data.targetRx || {}\r\n    if (rxId && nodeType === NodeType.Node) {\r\n      this.engine.getActions().activeNode(rxId)\r\n    }\r\n  }\r\n\r\n  handleOutNode = (e: MouseOutEvent): void => {\r\n    this.engine.getActions().activeNode(null)\r\n  }\r\n\r\n  destory(): void {\r\n    this.unover()\r\n    this.unout()\r\n  }\r\n\r\n}\r\n\r\nexport const ActiveController = (engine: IDesignerEngine) => {\r\n  return new ActiveControllerImpl(engine)\r\n}"],"names":["NodeType","MouseOutEvent","MouseOverEvent","ActiveControllerImpl","destory","unover","unout","constructor","engine","name","handleOverNode","e","rxId","nodeType","data","targetRx","Node","getActions","activeNode","handleOutNode","getShell","subscribeTo","ActiveController"],"mappings":"AAAA,SAA0BA,QAAQ,QAAqB,gBAAgB;AAEvE,SAASC,aAAa,QAAQ,sCAAsC;AACpE,SAASC,cAAc,QAAQ,uCAAuC;AAEtE,OAAO,MAAMC;IAqBXC,UAAgB;QACd,IAAI,CAACC,MAAM;QACX,IAAI,CAACC,KAAK;IACZ;IAnBAC,YAAsBC,OAAyB;sBAAzBA;aAJtBC,OAAe;aASfC,iBAAiB,CAACC,IAA4B;YAC5C,MAAM,EAAEC,KAAI,EAAEC,SAAQ,EAAE,GAAGF,EAAEG,IAAI,CAACC,QAAQ,IAAI,CAAC;YAC/C,IAAIH,QAAQC,aAAab,SAASgB,IAAI,EAAE;gBACtC,IAAI,CAACR,MAAM,CAACS,UAAU,GAAGC,UAAU,CAACN;YACtC,CAAC;QACH;aAEAO,gBAAgB,CAACR,IAA2B;YAC1C,IAAI,CAACH,MAAM,CAACS,UAAU,GAAGC,UAAU,CAAC,IAAI;QAC1C;QAbE,IAAI,CAACb,MAAM,GAAGG,OAAOY,QAAQ,GAAGC,WAAW,CAACnB,gBAAgB,IAAI,CAACQ,cAAc;QAC/E,IAAI,CAACJ,KAAK,GAAGE,OAAOY,QAAQ,GAAGC,WAAW,CAACpB,eAAe,IAAI,CAACkB,aAAa;IAC9E;AAkBF,CAAC;AAED,OAAO,MAAMG,mBAAmB,CAACd,SAA4B;IAC3D,OAAO,IAAIL,qBAAqBK;AAClC,EAAC"}