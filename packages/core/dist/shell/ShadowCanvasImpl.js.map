{"version":3,"sources":["../../src/shell/ShadowCanvasImpl.ts"],"sourcesContent":["import { IShellPane, ID, IDesignerEngine, IDriver, IDriverFactory, RXID_ATTR_NAME, IRect } from \"../interfaces\";\r\n\r\nexport class ShadowCanvasImpl implements IShellPane {\r\n  private dirvers: IDriver[] = []\r\n\r\n  constructor(\r\n    engine: IDesignerEngine,\r\n    private shadow: ShadowRoot,\r\n    private roolElement: HTMLElement,\r\n    public id: ID,\r\n    private driverFactories: IDriverFactory[]\r\n  ) {\r\n    for (const dirverFactory of this.driverFactories) {\r\n      this.dirvers.push(dirverFactory(engine.getShell(), roolElement))\r\n    }\r\n  }\r\n\r\n  appendChild(child: HTMLElement): void {\r\n    this.shadow.append(child)\r\n  }\r\n  contains(child: HTMLElement): boolean {\r\n    return this.shadow.contains(child)\r\n  }\r\n  removeChild(child: HTMLElement): void {\r\n    this.shadow.removeChild(child)\r\n  }\r\n  getElement(id: string): HTMLElement | null {\r\n    return this.shadow.querySelector(`[${RXID_ATTR_NAME}=\"${id}\"]`)\r\n  }\r\n\r\n  getTopRect(nodeId: string): IRect | null {\r\n    return this.getElement(nodeId)?.getBoundingClientRect() || null\r\n  }\r\n  \r\n  getContainerRect(): IRect | null{\r\n    return this.roolElement.getBoundingClientRect()\r\n  }\r\n\r\n  destory(): void {\r\n    for (const driver of this.dirvers) {\r\n      driver.teardown()\r\n    }\r\n    this.dirvers = []\r\n  }\r\n}"],"names":["RXID_ATTR_NAME","ShadowCanvasImpl","appendChild","child","shadow","append","contains","removeChild","getElement","id","querySelector","getTopRect","nodeId","getBoundingClientRect","getContainerRect","roolElement","destory","driver","dirvers","teardown","constructor","engine","driverFactories","dirverFactory","push","getShell"],"mappings":"AAAA,SAAmEA,cAAc,QAAe,gBAAgB;AAEhH,OAAO,MAAMC;IAeXC,YAAYC,KAAkB,EAAQ;QACpC,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF;IACrB;IACAG,SAASH,KAAkB,EAAW;QACpC,OAAO,IAAI,CAACC,MAAM,CAACE,QAAQ,CAACH;IAC9B;IACAI,YAAYJ,KAAkB,EAAQ;QACpC,IAAI,CAACC,MAAM,CAACG,WAAW,CAACJ;IAC1B;IACAK,WAAWC,EAAU,EAAsB;QACzC,OAAO,IAAI,CAACL,MAAM,CAACM,aAAa,CAAC,CAAC,CAAC,EAAEV,eAAe,EAAE,EAAES,GAAG,EAAE,CAAC;IAChE;IAEAE,WAAWC,MAAc,EAAgB;YAChC;QAAP,OAAO,CAAA,CAAA,mBAAA,IAAI,CAACJ,UAAU,CAACI,qBAAhB,8BAAA,KAAA,IAAA,iBAAyBC,4BAA2B,IAAI;IACjE;IAEAC,mBAAgC;QAC9B,OAAO,IAAI,CAACC,WAAW,CAACF,qBAAqB;IAC/C;IAEAG,UAAgB;QACd,KAAK,MAAMC,UAAU,IAAI,CAACC,OAAO,CAAE;YACjCD,OAAOE,QAAQ;QACjB;QACA,IAAI,CAACD,OAAO,GAAG,EAAE;IACnB;IAtCAE,YACEC,MAAuB,EACfjB,QACAW,aACDN,IACCa,gBACR;sBAJQlB;2BACAW;kBACDN;+BACCa;aAPFJ,UAAqB,EAAE;QAS7B,KAAK,MAAMK,iBAAiB,IAAI,CAACD,eAAe,CAAE;YAChD,IAAI,CAACJ,OAAO,CAACM,IAAI,CAACD,cAAcF,OAAOI,QAAQ,IAAIV;QACrD;IACF;AA6BF,CAAC"}