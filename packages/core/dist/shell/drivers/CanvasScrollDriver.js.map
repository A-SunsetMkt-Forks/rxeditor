{"version":3,"sources":["../../../src/shell/drivers/CanvasScrollDriver.ts"],"sourcesContent":["import { IDriver, IDriverFactory } from 'interfaces'\r\nimport { IDispatchable, ICustomEvent } from 'interfaces/event'\r\nimport { CanvasScrollEvent } from '../events'\r\n\r\nexport class CanvasScrollDriverImpl implements IDriver {\r\n\r\n  constructor(private dispatcher: IDispatchable<ICustomEvent<any>>, private element: Element | Node | HTMLElement) {\r\n    this.attach()\r\n  }\r\n\r\n  onScroll = () => {\r\n    this.dispatcher.dispatch(\r\n      new CanvasScrollEvent()\r\n    )\r\n  }\r\n\r\n  attach() {\r\n    this.element.addEventListener('scroll', this.onScroll)\r\n    this.win().addEventListener('scroll', this.onScroll)\r\n  }\r\n  teardown(): void {\r\n    this.element.removeEventListener('scroll', this.onScroll)\r\n    this.win().removeEventListener('scroll', this.onScroll)\r\n  }\r\n\r\n  private win(){\r\n    return (this.element as Document)?.defaultView || this.element?.ownerDocument?.defaultView || window\r\n  }\r\n}\r\n\r\nexport const CanvasScrollDriver: IDriverFactory = (\r\n  dispatcher: IDispatchable<ICustomEvent<any>>,\r\n  element: Element | Node | HTMLElement,\r\n) => {\r\n  return new CanvasScrollDriverImpl(\r\n    dispatcher,\r\n    element,\r\n  )\r\n}"],"names":["CanvasScrollEvent","CanvasScrollDriverImpl","attach","element","addEventListener","onScroll","win","teardown","removeEventListener","defaultView","ownerDocument","window","constructor","dispatcher","dispatch","CanvasScrollDriver"],"mappings":"AAEA,SAASA,iBAAiB,QAAQ,YAAW;AAE7C,OAAO,MAAMC;IAYXC,SAAS;QACP,IAAI,CAACC,OAAO,CAACC,gBAAgB,CAAC,UAAU,IAAI,CAACC,QAAQ;QACrD,IAAI,CAACC,GAAG,GAAGF,gBAAgB,CAAC,UAAU,IAAI,CAACC,QAAQ;IACrD;IACAE,WAAiB;QACf,IAAI,CAACJ,OAAO,CAACK,mBAAmB,CAAC,UAAU,IAAI,CAACH,QAAQ;QACxD,IAAI,CAACC,GAAG,GAAGE,mBAAmB,CAAC,UAAU,IAAI,CAACH,QAAQ;IACxD;IAEQC,MAAK;YACH,eAA0C;QAAlD,OAAO,CAAA,CAAC,gBAAA,IAAI,CAACH,OAAO,cAAZ,2BAAD,KAAA,IAAC,cAA2BM,WAAW,AAAD,KAAK,CAAA,CAAA,iBAAA,IAAI,CAACN,OAAO,cAAZ,4BAAA,KAAA,IAAA,+BAAA,eAAcO,oEAAd,KAAA,gCAA6BD,WAAF,AAAD,KAAkBE;IAChG;IArBAC,YAAoBC,YAAsDV,QAAuC;0BAA7FU;uBAAsDV;aAI1EE,WAAW,IAAM;YACf,IAAI,CAACQ,UAAU,CAACC,QAAQ,CACtB,IAAId;QAER;QAPE,IAAI,CAACE,MAAM;IACb;AAoBF,CAAC;AAED,OAAO,MAAMa,qBAAqC,CAChDF,YACAV,UACG;IACH,OAAO,IAAIF,uBACTY,YACAV;AAEJ,EAAC"}