{"version":3,"sources":["../../src/classes/ResourceManager.ts"],"sourcesContent":["import { ID, NodeType, RXID_ATTR_NAME, RX_NODE_TYPE_ATTR_NAME } from \"interfaces\";\r\nimport { ILocalesManager } from \"interfaces/loacales\";\r\nimport { makeRxId } from \"utils/make-rxId\";\r\nimport { IResource, IResourceManager, IResourceNode } from \"../interfaces/resource\";\r\n\r\nexport class ResourceManager implements IResourceManager {\r\n\r\n  private resources: {\r\n    [name: string]: IResourceNode\r\n  } = {}\r\n  constructor(private locales: ILocalesManager) {\r\n\r\n  }\r\n\r\n  getResource(id: ID): IResourceNode | null {\r\n    //判断id\r\n    for (const key of Object.keys(this.resources)) {\r\n      if (this.resources[key].id === id) {\r\n        return this.resources[key]\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  getResourceByName(name: string): IResourceNode | null {\r\n    return this.resources[name]\r\n  }\r\n\r\n  registerResources(...resources: IResource[]): IResourceNode[] {\r\n    const convertedResources: IResourceNode[] = []\r\n    for (const resource of resources) {\r\n\r\n      const rxId = makeRxId()\r\n      const node = {\r\n        ...resource,\r\n        id: rxId,\r\n        title: this.locales.getResouceMessage(resource.name || resource.name) || undefined,\r\n        rxProps: {\r\n          [RXID_ATTR_NAME]: rxId,\r\n          [RX_NODE_TYPE_ATTR_NAME]: NodeType.Resource\r\n        },\r\n      }\r\n      this.resources[resource.name] = node\r\n      convertedResources.push(node)\r\n    }\r\n    return convertedResources\r\n  }\r\n  clear(): void {\r\n    this.resources = {}\r\n  }\r\n\r\n}"],"names":["NodeType","RXID_ATTR_NAME","RX_NODE_TYPE_ATTR_NAME","makeRxId","ResourceManager","getResource","id","key","Object","keys","resources","getResourceByName","name","registerResources","convertedResources","resource","rxId","node","title","locales","getResouceMessage","undefined","rxProps","Resource","push","clear","constructor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAaA,QAAQ,EAAEC,cAAc,EAAEC,sBAAsB,QAAQ,aAAa;AAElF,SAASC,QAAQ,QAAQ,kBAAkB;AAG3C,OAAO,MAAMC;IASXC,YAAYC,EAAM,EAAwB;QACxC,MAAM;QACN,KAAK,MAAMC,OAAOC,OAAOC,IAAI,CAAC,IAAI,CAACC,SAAS,EAAG;YAC7C,IAAI,IAAI,CAACA,SAAS,CAACH,IAAI,CAACD,EAAE,KAAKA,IAAI;gBACjC,OAAO,IAAI,CAACI,SAAS,CAACH,IAAI;YAC5B,CAAC;QACH;QAEA,OAAO,IAAI;IACb;IAEAI,kBAAkBC,IAAY,EAAwB;QACpD,OAAO,IAAI,CAACF,SAAS,CAACE,KAAK;IAC7B;IAEAC,kBAAkB,GAAGH,SAAsB,EAAmB;QAC5D,MAAMI,qBAAsC,EAAE;QAC9C,KAAK,MAAMC,YAAYL,UAAW;YAEhC,MAAMM,OAAOb;YACb,MAAMc,OAAO,qCACRF;gBACHT,IAAIU;gBACJE,OAAO,IAAI,CAACC,OAAO,CAACC,iBAAiB,CAACL,SAASH,IAAI,IAAIG,SAASH,IAAI,KAAKS;gBACzEC,SAAS;oBACP,CAACrB,eAAe,EAAEe;oBAClB,CAACd,uBAAuB,EAAEF,SAASuB,QAAQ;gBAC7C;;YAEF,IAAI,CAACb,SAAS,CAACK,SAASH,IAAI,CAAC,GAAGK;YAChCH,mBAAmBU,IAAI,CAACP;QAC1B;QACA,OAAOH;IACT;IACAW,QAAc;QACZ,IAAI,CAACf,SAAS,GAAG,CAAC;IACpB;IAxCAgB,YAAoBP,QAA0B;uBAA1BA;aAHZT,YAEJ,CAAC;IAGL;AAwCF,CAAC"}