{"version":3,"sources":["../../../src/auxwidgets/toolbar/index.ts"],"sourcesContent":["import { IDesignerEngine, ID, Unsubscribe, ITreeNode } from \"../../interfaces\";\r\nimport { CanvasScrollEvent } from \"../../shell/events\";\r\nimport { IPlugin } from \"../../interfaces/plugin\";\r\nimport { numbToPx } from \"../utils/numbToPx\";\r\nimport { CloneButton } from \"./controls/CloneButton\";\r\nimport { DeleteButton } from \"./controls/DeleteButton\";\r\nimport { ComponentSelector } from \"./controls/Selector\";\r\nimport { IAuxControl, IAuxToolbar } from \"./interfaces\";\r\nimport { MoveButton } from \"./controls/MoveButton\";\r\nimport { DraggingNodesState } from \"../../reducers/draggingNodes\";\r\nimport { DraggingResourceState } from \"../../reducers/draggingResource\";\r\nimport { LockButton } from \"./controls/LockButton\";\r\nimport { getMaxZIndex } from \"../outlines/getMaxZIndex\";\r\n\r\nexport class ToolbarImpl implements IPlugin, IAuxToolbar {\r\n  name: string = \"default.toolbar\";\r\n  resizeObserver: ResizeObserver\r\n  private unsubscribe: Unsubscribe;\r\n  private unsubscribeSelect: Unsubscribe;\r\n  private nodeChangeUnsubscribe: Unsubscribe;\r\n  private controls: IAuxControl[] = [];\r\n  private htmlElement: HTMLElement | null = null\r\n  private unCanvasScroll: Unsubscribe\r\n  private draggingNodesOff: Unsubscribe\r\n  private draggingResourceOff: Unsubscribe\r\n  private refreshedFlag = false\r\n  constructor(protected engine: IDesignerEngine,) {\r\n    if (!engine.getShell().getContainer) {\r\n      console.error(\"Html 5 driver rootElement is undefined\")\r\n    }\r\n    this.resizeObserver = new ResizeObserver(this.onResize)\r\n\r\n    this.addControl(new ComponentSelector(engine))\r\n    this.addControl(new LockButton(engine))\r\n    this.addControl(new CloneButton(engine))\r\n    this.addControl(new MoveButton(engine))\r\n    this.addControl(new DeleteButton(engine))\r\n    this.unsubscribe = engine.getMonitor().subscribeToCurrentNodeChanged(this.currentNodeChanged)\r\n    this.unsubscribeSelect = engine.getMonitor().subscribeToSelectChange(this.handleSelectChange)\r\n    this.nodeChangeUnsubscribe = engine.getMonitor().subscribeToHasNodeChanged(this.refresh)\r\n    this.unCanvasScroll = this.engine.getShell().subscribeTo(CanvasScrollEvent, this.refresh)\r\n    this.draggingNodesOff = this.engine.getMonitor().subscribeToDraggingNodes(this.handleDraggingNodes)\r\n    this.draggingResourceOff = this.engine.getMonitor().subscribeToDraggingResource(this.handleDraggingResource)\r\n  }\r\n\r\n  onResize = () => {\r\n    this.refresh()\r\n  }\r\n\r\n  //临时措施，跟踪popup变化\r\n  handleSelectChange = (selectedIds: ID[] | null) => {\r\n    this.refresh()\r\n    if (selectedIds?.length && !this.engine.getShell().getElement(selectedIds?.[0])) {\r\n      setTimeout(() => {\r\n        this.refresh()\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n  currentNodeChanged = (node: ITreeNode) => {\r\n    this.resizeObserver.disconnect()\r\n    this.refresh()\r\n    if (node && !this.engine.getShell().getElement(node.id)) {\r\n      setTimeout(() => {\r\n        this.refresh()\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n  handleDraggingNodes = (dragging: DraggingNodesState | null) => {\r\n    this.hideWhenDragging(!!dragging)\r\n  }\r\n\r\n  handleDraggingResource = (dragging: DraggingResourceState | null) => {\r\n    this.hideWhenDragging(!!dragging)\r\n  }\r\n\r\n  private hideWhenDragging = (dragging: boolean) => {\r\n    if (dragging) {\r\n      if (this.htmlElement) {\r\n        this.htmlElement.style.display = \"none\"\r\n      }\r\n    } else {\r\n      if (this.htmlElement) {\r\n        this.htmlElement.style.display = \"flex\"\r\n      }\r\n    }\r\n  }\r\n\r\n  replaceControl(control: IAuxControl): void {\r\n    if (this.controls.find(ctrl => ctrl.name === control.name)) {\r\n      this.controls = this.controls.map(ctrl => ctrl.name === control.name ? control : ctrl)\r\n    } else {\r\n      throw new Error(\"Can not find old control by name:\" + control.name)\r\n    }\r\n  }\r\n\r\n  addControl(control: IAuxControl, index?: number | undefined): void {\r\n    if (index !== undefined && index >= this.controls.length) {\r\n      throw new Error(\"index is too big\")\r\n    }\r\n    if (index === undefined) {\r\n      this.controls.push(control)\r\n    } else {\r\n      this.controls.splice(index, 0, control)\r\n    }\r\n  }\r\n\r\n  private render() {\r\n    const node = this.engine.getMonitor().getCurrentNode()\r\n    const divEl = this.htmlElement\r\n    const canvas = this.engine.getShell().getCanvas(this.engine.getMonitor().getNodeDocumentId(node?.id || \"\") || \"\")\r\n    divEl && canvas?.contains(divEl) && canvas?.removeChild(divEl)\r\n    this.htmlElement = null\r\n    if (!node) {\r\n      if (divEl) {\r\n        divEl.remove()\r\n      }\r\n      return\r\n    }\r\n    const element = node.id && this.engine.getShell().getElement(node.id)\r\n    const positionLimit = this.positionLimit(node.documentId)\r\n\r\n    const containerRect = canvas?.getContainerRect()\r\n\r\n    if (element && positionLimit && containerRect) {\r\n      const rect = element.getBoundingClientRect();\r\n\r\n      const htmlDiv = document.createElement('div')\r\n      htmlDiv.style.display = \"flex\"\r\n      htmlDiv.style.alignItems = \"center\"\r\n      for (const ctrl of this.controls) {\r\n        const ctrlHtmlEl = ctrl.onRender(node)\r\n        if (ctrlHtmlEl && ctrl.selector(node, this.engine)) {\r\n          htmlDiv.appendChild(ctrlHtmlEl)\r\n        }\r\n      }\r\n      const barHeight = htmlDiv.getBoundingClientRect().height || 16\r\n      let top = rect.y - barHeight - 6;\r\n      if (top < positionLimit.top) {\r\n        top = rect.y + rect.height + 2\r\n        if (top > (positionLimit.bottom - barHeight)) {\r\n          top = rect.y + 2\r\n        }\r\n      }\r\n\r\n      const right = containerRect.width - (rect.x - containerRect.x) - rect.width;\r\n      htmlDiv.style.position = \"fixed\"\r\n      htmlDiv.style.right = numbToPx(right)\r\n      htmlDiv.style.top = numbToPx(top - containerRect.y)\r\n      htmlDiv.style.fontSize = \"12px\"\r\n      htmlDiv.style.padding = \"0px\"\r\n      htmlDiv.style.zIndex = (getMaxZIndex(element) + 1).toString()\r\n      htmlDiv.style.userSelect = \"none\"\r\n\r\n      canvas?.appendChild(htmlDiv)\r\n\r\n      const divRect = htmlDiv.getBoundingClientRect()\r\n      if ((rect.x + rect.width - divRect.width) < positionLimit.left) {\r\n        htmlDiv.style.right = \"auto\"\r\n        htmlDiv.style.left = numbToPx(positionLimit.left)\r\n      }\r\n\r\n      this.htmlElement = htmlDiv\r\n      this.resizeObserver.observe(element)\r\n    }\r\n  }\r\n\r\n  //20毫秒之内的事件，只刷新一次\r\n  private refresh = () => {\r\n    this.refreshedFlag = true\r\n    setTimeout(() => {\r\n      if (this.refreshedFlag) {\r\n        this.render()\r\n        this.refreshedFlag = false\r\n      }\r\n    }, 20)\r\n  }\r\n\r\n  destory(): void {\r\n    this.clear()\r\n    this.nodeChangeUnsubscribe()\r\n    this.unsubscribe()\r\n    this.unsubscribeSelect()\r\n    this.unCanvasScroll()\r\n    this.draggingNodesOff?.()\r\n    this.draggingResourceOff?.()\r\n  }\r\n\r\n  private positionLimit(documentId: ID) {\r\n    const bodyRect = document.body.getBoundingClientRect()\r\n    const rect = this.engine.getShell().getCanvas(documentId)?.getContainerRect()\r\n    if (!rect) {\r\n      return null\r\n    }\r\n    return {\r\n      right: bodyRect.width - rect.x - rect.width,\r\n      left: rect.x,\r\n      top: rect.y,\r\n      bottom: rect.y + rect.height\r\n    }\r\n  }\r\n\r\n  private clear() {\r\n    for (const ctrl of this.controls) {\r\n      ctrl.teardown()\r\n    }\r\n    if (this.htmlElement) {\r\n      this.htmlElement.remove()\r\n    }\r\n    this.htmlElement = null\r\n  }\r\n}\r\n\r\nexport const Toolbar = (engine: IDesignerEngine) => {\r\n  return new ToolbarImpl(engine)\r\n}\r\n"],"names":["CanvasScrollEvent","numbToPx","CloneButton","DeleteButton","ComponentSelector","MoveButton","LockButton","getMaxZIndex","ToolbarImpl","replaceControl","control","controls","find","ctrl","name","map","Error","addControl","index","undefined","length","push","splice","render","node","engine","getMonitor","getCurrentNode","divEl","htmlElement","canvas","getShell","getCanvas","getNodeDocumentId","id","contains","removeChild","remove","element","getElement","positionLimit","documentId","containerRect","getContainerRect","rect","getBoundingClientRect","htmlDiv","document","createElement","style","display","alignItems","ctrlHtmlEl","onRender","selector","appendChild","barHeight","height","top","y","bottom","right","width","x","position","fontSize","padding","zIndex","toString","userSelect","divRect","left","resizeObserver","observe","destory","clear","nodeChangeUnsubscribe","unsubscribe","unsubscribeSelect","unCanvasScroll","draggingNodesOff","draggingResourceOff","bodyRect","body","teardown","constructor","refreshedFlag","onResize","refresh","handleSelectChange","selectedIds","setTimeout","currentNodeChanged","disconnect","handleDraggingNodes","dragging","hideWhenDragging","handleDraggingResource","getContainer","console","error","ResizeObserver","subscribeToCurrentNodeChanged","subscribeToSelectChange","subscribeToHasNodeChanged","subscribeTo","subscribeToDraggingNodes","subscribeToDraggingResource","Toolbar"],"mappings":"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"}