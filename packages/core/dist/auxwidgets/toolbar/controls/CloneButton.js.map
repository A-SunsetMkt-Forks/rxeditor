{"version":3,"sources":["../../../../src/auxwidgets/toolbar/controls/CloneButton.ts"],"sourcesContent":["import { IDesignerEngine, ITreeNode } from \"../../../interfaces\";\r\nimport { AbstractButton } from \"./AbstractButton\";\r\n\r\nexport class CloneButton extends AbstractButton {\r\n  constructor(protected engine: IDesignerEngine) {\r\n    super(\"default.clone-button\", engine)\r\n  }\r\n\r\n  handleClone = () => {\r\n    const node = this.engine.getMonitor().getCurrentNode()\r\n    if (node) {\r\n      const doc = this.engine.getNodeDocument(node.id)\r\n      if (doc) {\r\n        doc.clone(node.id)\r\n      }\r\n    }\r\n  }\r\n\r\n  onRender(node: ITreeNode): HTMLElement | null {\r\n    const behavior = this.engine.getNodeBehavior(node.id)\r\n    if (!behavior.isCloneable() || node.isSlot) {\r\n      this.teardown()\r\n      return null\r\n    }\r\n    const htmlEl = this.createHtmlElement()\r\n    htmlEl.innerHTML = `\r\n    <svg style=\"width:13px;height:13px\" viewBox=\"0 0 24 24\">\r\n      <path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\" />\r\n    </svg>\r\n    `\r\n    htmlEl.addEventListener(\"click\", this.handleClone)\r\n    return htmlEl\r\n  }\r\n\r\n  teardown(): void {\r\n    if (this.htmlElement) {\r\n      this.htmlElement.removeEventListener(\"click\", this.handleClone)\r\n    }\r\n    super.teardown()\r\n  }\r\n}"],"names":["AbstractButton","CloneButton","onRender","node","behavior","engine","getNodeBehavior","id","isCloneable","isSlot","teardown","htmlEl","createHtmlElement","innerHTML","addEventListener","handleClone","htmlElement","removeEventListener","constructor","getMonitor","getCurrentNode","doc","getNodeDocument","clone"],"mappings":"AACA,SAASA,cAAc,QAAQ,mBAAmB;AAElD,OAAO,MAAMC,oBAAoBD;IAe/BE,SAASC,IAAe,EAAsB;QAC5C,MAAMC,WAAW,IAAI,CAACC,MAAM,CAACC,eAAe,CAACH,KAAKI,EAAE;QACpD,IAAI,CAACH,SAASI,WAAW,MAAML,KAAKM,MAAM,EAAE;YAC1C,IAAI,CAACC,QAAQ;YACb,OAAO,IAAI;QACb,CAAC;QACD,MAAMC,SAAS,IAAI,CAACC,iBAAiB;QACrCD,OAAOE,SAAS,GAAG,CAAC;;;;IAIpB,CAAC;QACDF,OAAOG,gBAAgB,CAAC,SAAS,IAAI,CAACC,WAAW;QACjD,OAAOJ;IACT;IAEAD,WAAiB;QACf,IAAI,IAAI,CAACM,WAAW,EAAE;YACpB,IAAI,CAACA,WAAW,CAACC,mBAAmB,CAAC,SAAS,IAAI,CAACF,WAAW;QAChE,CAAC;QACD,KAAK,CAACL,QAAQ;IAChB;IAnCAQ,YAAsBb,OAAyB;QAC7C,KAAK,CAAC,wBAAwBA;sBADVA;aAItBU,cAAc,IAAM;YAClB,MAAMZ,OAAO,IAAI,CAACE,MAAM,CAACc,UAAU,GAAGC,cAAc;YACpD,IAAIjB,MAAM;gBACR,MAAMkB,MAAM,IAAI,CAAChB,MAAM,CAACiB,eAAe,CAACnB,KAAKI,EAAE;gBAC/C,IAAIc,KAAK;oBACPA,IAAIE,KAAK,CAACpB,KAAKI,EAAE;gBACnB,CAAC;YACH,CAAC;QACH;IAVA;AAkCF,CAAC"}