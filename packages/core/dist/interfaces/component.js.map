{"version":3,"sources":["../../src/interfaces/component.ts"],"sourcesContent":["import { IDesignerProps, INodeSchema, ITreeNode } from \"./document\"\r\nimport { IDesignerEngine } from \"./engine\"\r\nimport { ILocales } from \"./loacales\"\r\nimport { IResource } from \"./resource\"\r\nimport { ID } from \"./types\"\r\n\r\nexport type Selector = (node: ITreeNode, engine?: IDesignerEngine) => boolean\r\n\r\nexport type IResizable = {\r\n  width?: boolean\r\n  height?: boolean\r\n}\r\n\r\nexport type IMoveable = {\r\n  x?: boolean\r\n  y?: boolean\r\n}\r\n\r\nexport type AbleCheckFunction = ((nodeId: ID, engine?: IDesignerEngine) => boolean)\r\n\r\nexport interface IBehaviorRule {\r\n  disabled?: boolean | AbleCheckFunction //默认false\r\n  selectable?: boolean | AbleCheckFunction //是否可选中，默认为true\r\n  droppable?: boolean | AbleCheckFunction//是否可作为拖拽容器，默认为false\r\n  draggable?: boolean | AbleCheckFunction //是否可拖拽，默认为true\r\n  deletable?: boolean | AbleCheckFunction //是否可删除，默认为true\r\n  cloneable?: boolean | AbleCheckFunction //是否可拷贝，默认为true\r\n  resizable?: IResizable | ((engine?: IDesignerEngine) => IResizable)\r\n  moveable?: IMoveable | ((engine?: IDesignerEngine) => IMoveable)  // 可用于自由布局\r\n  allowChild?: (target: ITreeNode, engine?: IDesignerEngine,) => boolean\r\n  allowAppendTo?: (target: ITreeNode, engine?: IDesignerEngine,) => boolean\r\n  allowSiblingsTo?: (target: ITreeNode, engine?: IDesignerEngine,) => boolean\r\n  noPlaceholder?: boolean,\r\n  noRef?: boolean,\r\n  lockable?: boolean,\r\n}\r\n\r\n// export interface IDesignerParams {\r\n//   locked?: boolean,\r\n//   [key: string]: any\r\n// }\r\n\r\nexport interface IComponentConfig<ComponentType = any> {\r\n  packageName?: string //npm包名 生成代码用\r\n  componentName: string\r\n  component: ComponentType,\r\n  designer: ComponentType,\r\n  behaviorRule?: IBehaviorRule\r\n  designerSchema?: INodeSchema\r\n  designerLocales?: ILocales\r\n  designerProps?: IDesignerProps\r\n  //designerParams?: IDesignerParams\r\n  resource?: IResource\r\n  //slots用到的组件，值为true时，用缺省组件DefaultSlot, string时，存的是已经注册过的component resource名字\r\n  slots?: {\r\n    [name: string]: IComponentConfig | true | string | undefined\r\n  },\r\n  //自定义属性面板用的多语言资源\r\n  toolsLocales?: ILocales\r\n  tools?: {\r\n    [name: string]: ComponentType | undefined\r\n  },\r\n}\r\n\r\n//可独立注册的行为规则\r\nexport interface IBehavior {\r\n  //唯一名称防止重复注册\r\n  name: string\r\n  selector: string | Selector\r\n  rule: IBehaviorRule\r\n}\r\n\r\nexport interface IComponentManager {\r\n  getNodeBehaviorRules(nodeId: ID): IBehaviorRule[]\r\n  getComponentDesigner(componentName: string): IComponentConfig | undefined\r\n  registerComponents(...componentDesigners: IComponentConfig[]): void\r\n  registerBehaviors(...behaviors: IBehavior[]): void\r\n  removeBehaviors(...names: string[]): void\r\n  setBehaviors(...behaviors: IBehavior[]): void\r\n}"],"names":[],"mappings":"AAAA,WA+EC"}